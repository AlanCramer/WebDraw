<!DOCTYPE html>
<meta charset="utf-8">
<script src="vendor/d3.min.js"></script>

<script>
    var myApp = {};
</script>

<script src="d3widgets/fingerJoint.js"></script>
<script src="makeBoard.js"></script>
<script src="bfjInfoArea.js"></script>

<head>
</head>

<body>
<style>

#infoArea {

    margin:     5px;
    background: #eee;
    padding:    5px;
}

#inputArea {

    margin-top: 15px;
    width: 20%;
    display: table;
}

#inputArea .inputRow{

    display: table-row;
}

#inputArea input {
    
    width: 50px;
    float: right;
    display: table-cell;
    padding: 3px;
}

.inputLabel {

    float: left;
    margin-right: 5px;
    display: table-cell;
    padding: 3px;
}

svg {

    margin: 5px;
}

</style>


<script>

myApp.onBoxDimChange = function() {
    
    
}

// boards is a d3 selection of the all the boards (svg groups), 
// bound to their corresponding data
myApp.layoutBoards = function(boards) {

    var spacing = 10; // px
    var xoffset = 20; // px
    var yoffset = 20; // px
    
    var totalY = yoffset;
    
    boards
        .attr("transform", function(d) { 
        
            var ret = "translate (" + xoffset + ", " + totalY + ")";
            totalY += (d.height * d.pxPerIn + spacing); // setting up for next one
            return  ret;
        });
}

    var pxPerIn = 30;
    
    var boxWidth = 8;
    var boxLength = 4;
    var boxHeight = 3;
    
    var svgWidth = 600;
    var svgHeight = 400;

    var boardData = [ 
        {
            width    : boxWidth,
            height   : boxHeight,
            pxPerIn  : pxPerIn,
            color    : "#944",
            fjStarts : [0,1,2,3] 
        },
        {
            width    : boxLength,
            height   : boxHeight,
            pxPerIn  : pxPerIn,
            color    : "#449",
            fjStarts : [0.5,1.5,2.5] 
        },
    ];
    
    // todo revisit this function
    buildInfoArea();

    // build svg and boards    
    var svg = d3.select("body")
        .append("svg")
        .attr("width", svgWidth)
        .attr("height", svgHeight)
        .style("border", "1px solid black")
        ;
        
    var boards = myApp.update(boardData);
    myApp.layoutBoards(boards);
    
    
//    var board1 = myApp.makeBoard(boxWidth, boxHeight, pxPerIn, "#944", [0,1,2,3]);
//    var board2 = myApp.makeBoard(boxLength, boxHeight, pxPerIn, "#449", [0.5,1.5,2.5]);
//    
//    var xOffset = 30;
//    var yOffset = 20;  
//     
//    board1
//        .attr("transform", "scale(0)")
//        .transition()
//        .duration(1000)
//        .attr("transform", "translate(" + xOffset + ", " + yOffset + ") scale(1)")
//        ;
//    
//    board2
//        .attr("transform", "scale(0)")
//        .transition()
//        .duration(1200)
//        .attr("transform", "translate(" + xOffset + ", " + (yOffset + svgHeight/2) + ") scale(1)")
//        ;
//


        
        
</script>

</body>
</html>


